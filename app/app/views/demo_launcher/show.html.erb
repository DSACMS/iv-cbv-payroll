<% content_for :title, "Demo Launcher" %>
<div class="grid-col tablet:grid-col-8">
  <h1>Demo Launcher</h1>
  <p>Configure settings and launch a flow in a new tab.</p>

  <%= form_with(url: "/demo", method: :post, builder: UswdsFormBuilder, html: { class: "usa-form usa-form--large" }, data: { turbo: false }) do |f| %>
    <input type="hidden" name="flow_type" value="activity">
    <input type="hidden" name="client_agency_id" value="sandbox">

    <div class="usa-form-group">
      <label class="usa-label" for="reporting_window">Reporting window type</label>
      <div class="usa-hint">Renewal = 6 months, Application = agency default</div>
      <div class="usa-radio">
        <input class="usa-radio__input usa-radio__input--tile" type="radio" name="reporting_window" id="reporting_window_application" value="application" <%= "checked" unless params[:reporting_window] == "renewal" %>>
        <label class="usa-radio__label" for="reporting_window_application">Application</label>
      </div>
      <div class="usa-radio">
        <input class="usa-radio__input usa-radio__input--tile" type="radio" name="reporting_window" id="reporting_window_renewal" value="renewal" <%= "checked" if params[:reporting_window] == "renewal" %>>
        <label class="usa-radio__label" for="reporting_window_renewal">Renewal</label>
      </div>
    </div>

    <div class="usa-form-group">
      <label class="usa-label" for="reporting_window_months">Reporting window months</label>
      <input class="usa-input usa-input--sm" type="number" name="reporting_window_months"
             id="reporting_window_months" min="1" max="12" autocomplete="off"
             value="<%= params[:reporting_window_months] %>">
    </div>

    <div class="usa-form-group">
      <label class="usa-label" for="demo_timeout">Session timeout (minutes)</label>
      <div class="usa-hint">Leave blank for default (30 min). Note: The warning modal appears 5 min before expiry, so use 6+ to avoid an immediate warning.</div>
      <input class="usa-input usa-input--sm" type="number" name="demo_timeout"
             id="demo_timeout" min="1" max="999" autocomplete="off"
             value="<%= params[:demo_timeout] %>">
    </div>

    <button type="submit" name="launch_type" value="generic" formtarget="_blank" class="usa-button">Launch Generic</button>
    <button type="submit" name="launch_type" value="tokenized" formtarget="_blank" class="usa-button usa-button--outline">Launch Tokenized</button>
  <% end %>
</div>
